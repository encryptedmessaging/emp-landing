<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <title>api - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="/lib/godoc/style.css">

<script type="text/javascript">window.initFuncs = [];</script>
</head>
<body>

<div id="topbar" class="wide"><div class="container">

<form method="GET" action="/search">
<div id="menu">
<a href="/doc/">Documents</a>
<a href="/pkg/">Packages</a>
<a href="/project/">The Project</a>
<a href="/help/">Help</a>
<a href="/blog/">Blog</a>

<input type="text" id="search" name="q" class="inactive" value="Search" placeholder="Search">
</div>
<div id="heading"><a href="/">The Go Programming Language</a></div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <div id="plusone"><g:plusone size="small" annotation="none"></g:plusone></div>
  <h1>Package api</h1>




<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "emp/api"</code></dd>
			</dl>
			<dl>
			<dd><a href="#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Package api provides a TCP server that fully implements the EMProtocol.
</p>

			</div>
		</div>
		

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="#CmdString">func CmdString(cmd uint8) string</a></dd>
			
				
				<dd><a href="#DumpNodes">func DumpNodes(config *ApiConfig)</a></dd>
			
				
				<dd><a href="#GetConfDir">func GetConfDir() string</a></dd>
			
				
				<dd><a href="#ReadNodes">func ReadNodes(config *ApiConfig)</a></dd>
			
				
				<dd><a href="#SetConfDir">func SetConfDir(conf string)</a></dd>
			
				
				<dd><a href="#Start">func Start(config *ApiConfig)</a></dd>
			
			
				
				<dd><a href="#ApiConfig">type ApiConfig</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#GetConfig">func GetConfig(confFile string) *ApiConfig</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h4>Package files</h4>
			<p>
			<span style="font-size:90%">
			
				<a href="/src/pkg/emp/api/api.go">api.go</a>
			
				<a href="/src/pkg/emp/api/aux.go">aux.go</a>
			
				<a href="/src/pkg/emp/api/config.go">config.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		
		
		
			
			
			<h2 id="CmdString">func <a href="/src/pkg/emp/api/config.go?s=2023:2055#L52">CmdString</a></h2>
			<pre>func CmdString(cmd <a href="/pkg/builtin/#uint8">uint8</a>) <a href="/pkg/builtin/#string">string</a></pre>
			<p>
Returns Human-Readable string for a specific EMP command.
</p>

			
		
			
			
			<h2 id="DumpNodes">func <a href="/src/pkg/emp/api/config.go?s=6371:6404#L245">DumpNodes</a></h2>
			<pre>func DumpNodes(config *<a href="#ApiConfig">ApiConfig</a>)</pre>
			<p>
Dump all nodes in config.NodeList to config.NodeFile.
</p>

			
		
			
			
			<h2 id="GetConfDir">func <a href="/src/pkg/emp/api/config.go?s=3134:3158#L113">GetConfDir</a></h2>
			<pre>func GetConfDir() <a href="/pkg/builtin/#string">string</a></pre>
			<p>
Get Config Directory: Defaults to $(HOME)/.config/emp/
</p>

			
		
			
			
			<h2 id="ReadNodes">func <a href="/src/pkg/emp/api/config.go?s=5652:5685#L210">ReadNodes</a></h2>
			<pre>func ReadNodes(config *<a href="#ApiConfig">ApiConfig</a>)</pre>
			<p>
Load and connect to all nodes from the NodeFile found in the ApiConfig.
</p>

			
		
			
			
			<h2 id="SetConfDir">func <a href="/src/pkg/emp/api/config.go?s=3026:3054#L108">SetConfDir</a></h2>
			<pre>func SetConfDir(conf <a href="/pkg/builtin/#string">string</a>)</pre>
			<p>
Set Config Directory where databases and configuration are stored.
</p>

			
		
			
			
			<h2 id="Start">func <a href="/src/pkg/emp/api/api.go?s=663:692#L18">Start</a></h2>
			<pre>func Start(config *<a href="#ApiConfig">ApiConfig</a>)</pre>
			<p>
Starts a new TCP Server wth configuration specified in ApiConfig.
Server will terminate cleanly only when data is sent to the Quit channel.
</p>
<p>
See (struct ApiConfig) for details.
</p>

			
		
		
			
			
			<h2 id="ApiConfig">type <a href="/src/pkg/emp/api/config.go?s=474:1960#L19">ApiConfig</a></h2>
			<pre>type ApiConfig struct {
    <span class="comment">// Network Channels</span>
    RecvQueue chan <a href="/pkg/quibit/">quibit</a>.<a href="/pkg/quibit/#Frame">Frame</a> <span class="comment">// Send frames here to be handled by the Running API</span>
    SendQueue chan <a href="/pkg/quibit/">quibit</a>.<a href="/pkg/quibit/#Frame">Frame</a> <span class="comment">// Frames to be broadcast to the network are sent here</span>
    PeerQueue chan <a href="/pkg/quibit/">quibit</a>.<a href="/pkg/quibit/#Peer">Peer</a>  <span class="comment">// New peers to connect to are sent here</span>

    <span class="comment">// Local Logic</span>
    DbFile       <a href="/pkg/builtin/#string">string</a>           <span class="comment">// Inventory File relative to Config Directory</span>
    LocalDB      <a href="/pkg/builtin/#string">string</a>           <span class="comment">// EMPLocal Database relative to Config Directory</span>
    NodeFile     <a href="/pkg/builtin/#string">string</a>           <span class="comment">// File to store list of &lt;IP&gt;:&lt;Host&gt; Strings</span>
    NodeList     <a href="/pkg/emp/objects/">objects</a>.<a href="/pkg/emp/objects/#NodeList">NodeList</a> <span class="comment">// Active list of connected backbone nodes.</span>
    LocalVersion <a href="/pkg/emp/objects/">objects</a>.<a href="/pkg/emp/objects/#Version">Version</a>  <span class="comment">// Local version broadcast to nodes upon connection</span>
    Bootstrap    []<a href="/pkg/builtin/#string">string</a>         <span class="comment">// List of bootstrap nodes to use when all other nodes are disconnected.</span>

    <span class="comment">// Local Register</span>
    PubkeyRegister  chan <a href="/pkg/emp/objects/">objects</a>.<a href="/pkg/emp/objects/#Hash">Hash</a>    <span class="comment">// Identifiers for incoming encrypted public keys are sent here.</span>
    MessageRegister chan <a href="/pkg/emp/objects/">objects</a>.<a href="/pkg/emp/objects/#Message">Message</a> <span class="comment">// Incoming basic messages are copied here.</span>
    PubRegister     chan <a href="/pkg/emp/objects/">objects</a>.<a href="/pkg/emp/objects/#Message">Message</a> <span class="comment">// Incoming published messages are copied here.</span>
    PurgeRegister   chan [16]<a href="/pkg/builtin/#byte">byte</a>        <span class="comment">// Incomping purge tokens are copied here.</span>

    <span class="comment">// Administration</span>
    Log  chan <a href="/pkg/builtin/#string">string</a>    <span class="comment">// Error messages are sent here. WILL BLOCK if not</span>
    Quit chan <a href="/pkg/os/">os</a>.<a href="/pkg/os/#Signal">Signal</a> <span class="comment">// Send data here to cleanly quit the API Server</span>

    <span class="comment">// Network</span>
    RPCPort <a href="/pkg/builtin/#uint16">uint16</a> <span class="comment">// Port to run RPC API and EMPLocal Client</span>
    RPCUser <a href="/pkg/builtin/#string">string</a> <span class="comment">// Username for RPC server</span>
    RPCPass <a href="/pkg/builtin/#string">string</a> <span class="comment">// Password for RPC Server</span>

    HttpRoot <a href="/pkg/builtin/#string">string</a> <span class="comment">// HTML Root of EMPLocal Client</span>
}</pre>
			

			

			

			

			
				
				<h3 id="GetConfig">func <a href="/src/pkg/emp/api/config.go?s=3393:3435#L127">GetConfig</a></h3>
				<pre>func GetConfig(confFile <a href="/pkg/builtin/#string">string</a>) *<a href="#ApiConfig">ApiConfig</a></pre>
				<p>
Generate new config from configuration file. File provided as an Absolute Path.
</p>

				
			

			
		
	

	







<div id="footer">
Build version go1.2.<br>
Except as <a href="http://code.google.com/policies.html#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="/LICENSE">BSD license</a>.<br>
<a href="/doc/tos.html">Terms of Service</a> | 
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

<script type="text/javascript" src="/lib/godoc/jquery.js"></script>

<script type="text/javascript" src="/lib/godoc/godocs.js"></script>

</body>
</html>

